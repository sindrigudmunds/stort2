{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"script-compiled.js","sourcesContent":["//var JSON_URL = '/videos.json';\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n  console.log('DOMContentLoaded');\r\n  createSite();\r\n});\r\n\r\n\r\nfunction createSite(){\r\n  pullData();\r\n  createCategory(\"Myndbandaleigan\");\r\n}\r\n\r\n\r\nfunction createVideoElement(id, title, created, duration, poster, video) {\r\n  var card = document.createElement(\"div\");\r\n  card.classList.add(\"card\");\r\n  card.addEventListener('click', function() {\r\n    location.assign(\"http://localhost:3000/player.html?id=\" + id);\r\n    console.log(\"click\");\r\n  });\r\n  var card__img = document.createElement(\"div\");\r\n  card__img.classList.add(\"card__img\");\r\n\r\n  var image = document.createElement(\"img\");\r\n  image.setAttribute(\"src\", poster);\r\n\r\n  var time = document.createElement(\"div\");\r\n  time.classList.add(\"card__time\");\r\n\r\n  var min = Math.floor(duration/60);\r\n  var sek = duration - min*60;\r\n  if (min < 10) {\r\n    min = \"0\"+min;\r\n  }\r\n  if (sek < 10) {\r\n    sek = \"0\"+sek;\r\n  }\r\n  var ftime = document.createTextNode(min +\":\"+sek);\r\n\r\n  var card__content = document.createElement(\"div\");\r\n  card__content.classList.add(\"card__content\");\r\n\r\n  var card__title = document.createElement(\"div\");\r\n  card__title.classList.add(\"card__title\");\r\n  var card__title__title = document.createElement(\"h3\");\r\n  card__title__title.appendChild(document.createTextNode(title));\r\n  card__title.appendChild(card__title__title);\r\n\r\n  var card__text = document.createElement(\"div\");\r\n  card__text.classList.add(\"card__text\");\r\n  card__text.appendChild(document.createTextNode(\"Fyrir \" + parseMS(created) + \" síðan.\"));\r\n\r\n  function parseMS(created) {\r\n    var now = new Date().getTime();\r\n    var since = now - created;\r\n\r\n    //console.log(since);\r\n\r\n    var totalSecs = since / 1000;\r\n    var years = Math.floor(totalSecs / (60*60*24*365.25));\r\n    var months = Math.floor(totalSecs / (60*60*24*30));\r\n    var weeks = Math.floor(totalSecs / (60*60*24*7));\r\n    var days = Math.floor(totalSecs / (60 * 60 * 24));\r\n    var hours = Math.floor((totalSecs / (60 * 60)));\r\n\r\n    if (hours < 24) {\r\n      if (hours === 1 || hours === 21) {\r\n        return hours + \" klukkustund\";\r\n      }\r\n      return hours + \" klukkustundum\";\r\n    }else if (days < 7) {\r\n      if (days === 1) {\r\n        return days + \" degi\";\r\n      }\r\n      return days + \" dögum\";\r\n    }else if (weeks < 4) {\r\n      if (weeks === 1) {\r\n        return weeks + \" degi\";\r\n      }\r\n      return weeks + \" vikum\";\r\n    }else if (months < 12) {\r\n      if (months === 1) {\r\n        return months + \" mánuði\";\r\n      }\r\n      return months + \" mánuðum\";\r\n    }else {\r\n      if (years === 1 || years === 21) {\r\n        return years + \" ári\";\r\n      }\r\n      return years + \" árum\"\r\n    }\r\n\r\n  }\r\n\r\n  time.appendChild(ftime);\r\n  card__img.appendChild(image);\r\n  card__img.appendChild(time);\r\n  card__content.appendChild(card__title);\r\n  card__content.appendChild(card__text);\r\n  card.appendChild(card__img);\r\n  card.appendChild(card__content);\r\n  document.body.lastChild.appendChild(card);\r\n  //<img src=\"videos/bunny.png\">\r\n}\r\n\r\nfunction createPartition() {\r\n  var partition = document.createElement(\"div\");\r\n  partition.classList.add(\"partition\");\r\n  document.body.appendChild(partition);\r\n}\r\n\r\nfunction createCategory(title) {\r\n\r\n  //console.log(\"Kominn í createCategory\");\r\n  var category = document.createElement(\"div\");\r\n  var categoryHeading = document.createElement(\"h2\");\r\n  categoryHeading.appendChild(document.createTextNode(title));\r\n  categoryHeading.classList.add(\"category__heading\");\r\n  category.appendChild(categoryHeading);\r\n  category.classList.add(\"category\");\r\n  document.body.appendChild(category);\r\n  /*\r\n  * Smíðar container (div class=\"category\")\r\n  * smíðar titil og appendar sem firstChild (h2 class =\"category__heading\")\r\n  * kallar á createVideoElement fyrir hvert stak í videos[]\r\n  * appendar hvert element í röð og loks býr til tómt partition element ()\r\n  * og appendar aftast (div class=\"partition\")\r\n  */\r\n}\r\nfunction pullData() {\r\n  var request = new XMLHttpRequest();\r\n   request.open(\"GET\", \"videos.json\", true);\r\n   request.send();\r\n   request.onreadystatechange = function() {\r\n      if (this.readyState == 4 && this.status == 200) {\r\n         //console.log(request.responseText);\r\n          var response = JSON.parse(request.responseText);\r\n          //console.log(response.videos[1]);\r\n          for (var i = 0; i < response.categories.length; i++) {\r\n            //console.log(response.categories[0].videos[1]);\r\n            createCategory(response.categories[i].title);\r\n            //console.log(\"i= \" + i);\r\n            for (var j = 0; j < response.categories[i].videos.length; j++) {\r\n              //console.log(\"i= \" + i + \" j= \" + j);\r\n              for (var k = 0; k < response.videos.length; k++) {\r\n                //console.log(\"i= \" + i + \" j= \" + j + \" k= \" + k + \" videos[k].id = \" + response.videos[k].id + \" cat[i]vid[j] = \" + response.categories[i].videos[j]);\r\n                if (response.categories[i].videos[j] === response.videos[k].id) {\r\n                  //console.log(response.categories[i].videos[j] === response.videos[k].id);\r\n                  var v = response.videos[k];\r\n                  createVideoElement(v.id, v.title, v.created, v.duration,v.poster,v.video);\r\n                }\r\n              }\r\n            }\r\n            createPartition();\r\n          }\r\n\r\n\r\n          //createCategory(response.categories[0].title);\r\n          //document.getElementById(\"1\").innerHTML = \"<h1>Partí</h1>\";\r\n      }\r\n    };\r\n   //console.log(response);\r\n   //return response;\r\n }\r\n"]}